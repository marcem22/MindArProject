<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <title>AR Dinosaurios</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script type="module" src="/src/main.js"></script>
  <link rel="stylesheet" href="/src/style.css" />
</head>

<body>
  <!-- Pantalla de inicio mejorada -->
  <div class="ui-overlay">
    <div class="intro-animation">
      <h1 class="title-animated">ğŸ¦• Dino AR ğŸ¦–</h1>
      <div class="subtitle">Â¡Descubre dinosaurios en realidad aumentada!</div>
      
      <!-- Preview de dinosaurios -->
      <div class="dino-preview">
        <div class="dino-card">ğŸ¦• Brachiosaurus</div>
        <div class="dino-card">ğŸ¦– T-Rex</div>
        <div class="dino-card">ğŸ¦ Triceratops</div>
        <div class="dino-card">ğŸ¦ Velociraptor</div>
      </div>
      
      <!-- Instrucciones -->
      <div class="instructions">
        <div class="instruction-step">
          <span class="step-number">1</span>
          <span>Presiona "Iniciar"</span>
        </div>
        <div class="instruction-step">
          <span class="step-number">2</span>
          <span>Apunta a los marcadores</span>
        </div>
        <div class="instruction-step">
          <span class="step-number">3</span>
          <span>Â¡Disfruta los dinosaurios!</span>
        </div>
      </div>
      
      <button id="start-button">ğŸš€ Iniciar Aventura</button>
    </div>
  </div>

  <!-- Indicadores durante el escaneo -->
  <div id="scanning-ui" class="hidden">
    <div class="search-indicator">
      <div class="scanner-animation"></div>
      <div class="search-text">ğŸ” Buscando marcadores...</div>
      <div class="tip-text">Acerca la cÃ¡mara a un marcador de dinosaurio</div>
    </div>
  </div>

  <!-- Panel de informaciÃ³n del dinosaurio -->
  <div id="dino-info-panel" class="hidden">
    <div class="info-content">
      <h3 id="dino-name">Nombre del Dinosaurio</h3>
      <p id="dino-description">DescripciÃ³n del dinosaurio...</p>
      <div class="interaction-buttons">
        <button id="play-sound-btn">ğŸ”Š Rugido</button>
        <button id="take-photo-btn">ğŸ“¸ Foto</button>
      </div>
    </div>
    <button id="close-info-btn">âœ•</button>
  </div>

  <!-- BotÃ³n de reinicio mejorado -->
  <button id="restart-button" class="hidden">ğŸ”„ Reiniciar escaneo</button>
  
  <!-- Container AR -->
  <div id="ar-container" class="hidden"></div>
  
  <!-- Labels originales (ocultos, los reemplazamos con el panel) -->
  <div id="labels" style="display: none;">
    <div class="label" id="label-brachiosaurus">Brachiosaurus</div>
    <div class="label" id="label-trex">Tyrannosaurus Rex</div>
    <div class="label" id="label-triceratops">Triceratops</div>
    <div class="label" id="label-velociraptor">Velociraptor</div>
  </div>



  <script>
    let discoveredDinos = new Set();
    
    const dinoInfo = {
      0: { name: "Brachiosaurus", emoji: "ğŸ¦•", description: "Gigante herbÃ­voro de cuello largo que viviÃ³ hace 150 millones de aÃ±os." },
      1: { name: "Tyrannosaurus Rex", emoji: "ğŸ¦–", description: "El rey de los dinosaurios, depredador feroz de 12 metros de largo." },
      2: { name: "Triceratops", emoji: "ğŸ¦", description: "HerbÃ­voro con tres cuernos y un gran escudo Ã³seo en la cabeza." },
      3: { name: "Velociraptor", emoji: "ğŸ¦", description: "Cazador inteligente y Ã¡gil con garras curvas afiladas." }
    };

    document.querySelector("#start-button").addEventListener("click", () => {
      document.querySelector(".ui-overlay").style.display = "none";
      document.querySelector("#ar-container").classList.remove("hidden");
      document.querySelector("#scanning-ui").classList.remove("hidden");
      window.start();
    });

    // FunciÃ³n para actualizar contador de descubrimientos
    window.updateDiscoveredCount = (dinoIndex) => {
      if (!discoveredDinos.has(dinoIndex)) {
        discoveredDinos.add(dinoIndex);
        
        const countElement = document.getElementById('discovered-count');
        const listElement = document.getElementById('discovered-list');
        
        countElement.textContent = discoveredDinos.size;
        
        // AÃ±adir emoji del dinosaurio descubierto
        const dinoEmoji = document.createElement('span');
        dinoEmoji.textContent = dinoInfo[dinoIndex].emoji;
        dinoEmoji.className = 'discovered-emoji';
        listElement.appendChild(dinoEmoji);
        

      }
    };

    // FunciÃ³n para mostrar info del dinosaurio
    window.showDinoInfo = (dinoIndex) => {
      const info = dinoInfo[dinoIndex];
      const panel = document.getElementById('dino-info-panel');
      
      document.getElementById('dino-name').textContent = `${info.emoji} ${info.name}`;
      document.getElementById('dino-description').textContent = info.description;
      
      panel.classList.remove('hidden');
      document.querySelector("#scanning-ui").classList.add('hidden');
    };

    // FunciÃ³n para ocultar info del dinosaurio
    window.hideDinoInfo = () => {
      document.getElementById('dino-info-panel').classList.add('hidden');
      document.querySelector("#scanning-ui").classList.remove('hidden');
    };

    // Event listeners para el panel de informaciÃ³n
    document.getElementById('close-info-btn').addEventListener('click', window.hideDinoInfo);
    
    document.getElementById('play-sound-btn').addEventListener('click', () => {
      // El sonido ya se reproduce automÃ¡ticamente, pero podemos reproducirlo de nuevo
      const roarAudio = new Audio('/sounds/roar.mp3');
      roarAudio.play();
    });

    document.getElementById('take-photo-btn').addEventListener('click', () => {
      // Funcionalidad de captura de pantalla (simulada por ahora)
      alert('ğŸ“¸ Â¡Foto capturada!');
    });
  </script>

</body>

</html>